/*!
 * jQuery Form Plugin
 * version: 2.95 (30-JAN-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(i){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}var j,w,e,h=this;if(typeof i=="function"){i={success:i}}j=this.attr("method");w=this.attr("action");e=(typeof w==="string")?b.trim(w):"";e=e||window.location.href||"";if(e){e=(e.match(/^([^#]+)/)||[])[1]}i=b.extend(true,{url:e,success:b.ajaxSettings.success,type:j||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var p={};this.trigger("form-pre-serialize",[this,i,p]);if(p.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(i.beforeSerialize&&i.beforeSerialize(this,i)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g=i.traditional;if(g===undefined){g=b.ajaxSettings.traditional}var x,s,k,y=this.formToArray(i.semantic);if(i.data){i.extraData=i.data;x=b.param(i.data,g)}if(i.beforeSubmit&&i.beforeSubmit(y,this,i)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[y,this,i,p]);if(p.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var r=b.param(y,g);if(x){r=(r?(r+"&"+x):x)}if(i.type.toUpperCase()=="GET"){i.url+=(i.url.indexOf("?")>=0?"&":"?")+r;i.data=null}else{i.data=r}var o=[];if(i.resetForm){o.push(function(){h.resetForm()})}if(i.clearForm){o.push(function(){h.clearForm(i.includeHidden)})}if(!i.dataType&&i.target){var d=i.success||function(){};o.push(function(q){var n=i.replaceTarget?"replaceWith":"html";b(i.target)[n](q).each(d,arguments)})}else{if(i.success){o.push(i.success)}}i.success=function(C,B,D){var v=i.context||i;for(var q=0,n=o.length;q<n;q++){o[q].apply(v,[C,B,D||h,h])}};var u=b("input:file:enabled[value]",this);var f=u.length>0;var t="multipart/form-data";var A=(h.attr("enctype")==t||h.attr("encoding")==t);var z=!!(f&&u.get(0).files&&window.FormData);a("fileAPI :"+z);var c=(f||A)&&!z;if(i.iframe!==false&&(i.iframe||c)){if(i.closeKeepAlive){b.get(i.closeKeepAlive,function(){m(y)})}else{m(y)}}else{if((f||A)&&z){i.progress=i.progress||b.noop;l(y)}else{b.ajax(i)}}this.trigger("form-submit-notify",[this,i]);return this;function l(q){var n=new FormData();for(var B=0;B<q.length;B++){if(q[B].type=="file"){continue}n.append(q[B].name,q[B].value)}h.find("input:file:enabled").each(function(){var E=b(this).attr("name"),G=this.files;if(E){for(var F=0;F<G.length;F++){n.append(E,G[F])}}});if(i.extraData){for(var v in i.extraData){n.append(v,i.extraData[v])}}i.data=null;var D=b.extend(true,{},b.ajaxSettings,i,{contentType:false,processData:false,cache:false,type:"POST"});D.data=null;var C=D.beforeSend;D.beforeSend=function(F,E){E.data=n;if(F.upload){F.upload.onprogress=function(G){E.progress(G.position,G.total)}}if(C){C.call(E,F,i)}};b.ajax(D)}function m(Z){var D=h[0],E,V,P,X,S,H,K,J,I,T,W,O;var F=!!b.fn.prop;if(Z){if(F){for(V=0;V<Z.length;V++){E=b(D[Z[V].name]);E.prop("disabled",false)}}else{for(V=0;V<Z.length;V++){E=b(D[Z[V].name]);E.removeAttr("disabled")}}}if(b(":input[name=submit],:input[id=submit]",D).length){alert('Error: Form elements must not have name or id of "submit".');return}P=b.extend(true,{},b.ajaxSettings,i);P.context=P.context||P;S="jqFormIO"+(new Date().getTime());if(P.iframeTarget){H=b(P.iframeTarget);T=H.attr("name");if(T==null){H.attr("name",S)}else{S=T}}else{H=b('<iframe name="'+S+'" src="'+P.iframeSrc+'" />');H.css({position:"absolute",top:"-1000px",left:"-1000px"})}K=H[0];J={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var ac=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+ac);this.aborted=1;H.attr("src",P.iframeSrc);J.error=ac;P.error&&P.error.call(P.context,J,ac,n);X&&b.event.trigger("ajaxError",[J,P,ac]);P.complete&&P.complete.call(P.context,J,ac)}};X=P.global;if(X&&!b.active++){b.event.trigger("ajaxStart")}if(X){b.event.trigger("ajaxSend",[J,P])}if(P.beforeSend&&P.beforeSend.call(P.context,J,P)===false){if(P.global){b.active--}return}if(J.aborted){return}I=D.clk;if(I){T=I.name;if(T&&!I.disabled){P.extraData=P.extraData||{};P.extraData[T]=I.value;if(I.type=="image"){P.extraData[T+".x"]=D.clk_x;P.extraData[T+".y"]=D.clk_y}}}var q=1;var L=2;function C(ac){var n=ac.contentWindow?ac.contentWindow.document:ac.contentDocument?ac.contentDocument:ac.document;return n}var B=b("meta[name=csrf-token]").attr("content");var v=b("meta[name=csrf-param]").attr("content");if(v&&B){P.extraData=P.extraData||{};P.extraData[v]=B}function U(){var af=h.attr("target"),ac=h.attr("action");D.setAttribute("target",S);if(!j){D.setAttribute("method","POST")}if(ac!=P.url){D.setAttribute("action",P.url)}if(!P.skipEncodingOverride&&(!j||/post/i.test(j))){h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(P.timeout){O=setTimeout(function(){W=true;R(q)},P.timeout)}function ae(){try{var n=C(K).readyState;a("state = "+n);if(n.toLowerCase()=="uninitialized"){setTimeout(ae,50)}}catch(ah){a("Server abort: ",ah," (",ah.name,")");R(L);O&&clearTimeout(O);O=undefined}}var ad=[];try{if(P.extraData){for(var ag in P.extraData){ad.push(b('<input type="hidden" name="'+ag+'">').attr("value",P.extraData[ag]).appendTo(D)[0])}}if(!P.iframeTarget){H.appendTo("body");K.attachEvent?K.attachEvent("onload",R):K.addEventListener("load",R,false)}setTimeout(ae,15);D.submit()}finally{D.setAttribute("action",ac);if(af){D.setAttribute("target",af)}else{h.removeAttr("target")}b(ad).remove()}}if(P.forceSync){U()}else{setTimeout(U,10)}var aa,ab,Y=50,G;function R(ai){if(J.aborted||G){return}try{ab=C(K)}catch(aj){a("cannot access response document: ",aj);ai=L}if(ai===q&&J){J.abort("timeout");return}else{if(ai==L&&J){J.abort("server abort");return}}if(!ab||ab.location.href==P.iframeSrc){if(!W){return}}K.detachEvent?K.detachEvent("onload",R):K.removeEventListener("load",R,false);var ae="success",n;try{if(W){throw"timeout"}var af=P.dataType=="xml"||ab.XMLDocument||b.isXMLDoc(ab);a("isXml="+af);if(!af&&window.opera&&(ab.body==null||ab.body.innerHTML=="")){if(--Y){a("requeing onLoad callback, DOM not available");setTimeout(R,250);return}}var ak=ab.body?ab.body:ab.documentElement;J.responseText=ak?ak.innerHTML:null;J.responseXML=ab.XMLDocument?ab.XMLDocument:ab;if(af){P.dataType="xml"}J.getResponseHeader=function(am){var an={"content-type":P.dataType};return an[am]};if(ak){J.status=Number(ak.getAttribute("status"))||J.status;J.statusText=ak.getAttribute("statusText")||J.statusText}var ac=(P.dataType||"").toLowerCase();var ah=/(json|script|text)/.test(ac);if(ah||P.textarea){var ag=ab.getElementsByTagName("textarea")[0];if(ag){J.responseText=ag.value;J.status=Number(ag.getAttribute("status"))||J.status;J.statusText=ag.getAttribute("statusText")||J.statusText}else{if(ah){var ad=ab.getElementsByTagName("pre")[0];var al=ab.getElementsByTagName("body")[0];if(ad){J.responseText=ad.textContent?ad.textContent:ad.innerText}else{if(al){J.responseText=al.textContent?al.textContent:al.innerText}}}}}else{if(ac=="xml"&&!J.responseXML&&J.responseText!=null){J.responseXML=Q(J.responseText)}}try{aa=M(J,ac,P)}catch(ai){ae="parsererror";J.error=n=(ai||ae)}}catch(ai){a("error caught: ",ai);ae="error";J.error=n=(ai||ae)}if(J.aborted){a("upload aborted");ae=null}if(J.status){ae=(J.status>=200&&J.status<300||J.status===304)?"success":"error"}if(ae==="success"){P.success&&P.success.call(P.context,aa,"success",J);X&&b.event.trigger("ajaxSuccess",[J,P])}else{if(ae){if(n==undefined){n=J.statusText}P.error&&P.error.call(P.context,J,ae,n);X&&b.event.trigger("ajaxError",[J,P,n])}}X&&b.event.trigger("ajaxComplete",[J,P]);if(X&&!--b.active){b.event.trigger("ajaxStop")}P.complete&&P.complete.call(P.context,J,ae);G=true;if(P.timeout){clearTimeout(O)}setTimeout(function(){if(!P.iframeTarget){H.remove()}J.responseXML=null},100)}var Q=b.parseXML||function(n,ac){if(window.ActiveXObject){ac=new ActiveXObject("Microsoft.XMLDOM");ac.async="false";ac.loadXML(n)}else{ac=(new DOMParser()).parseFromString(n,"text/xml")}return(ac&&ac.documentElement&&ac.documentElement.nodeName!="parsererror")?ac:null};var N=b.parseJSON||function(n){return window["eval"]("("+n+")")};var M=function(ag,ae,ad){var ac=ag.getResponseHeader("content-type")||"",n=ae==="xml"||!ae&&ac.indexOf("xml")>=0,af=n?ag.responseXML:ag.responseText;if(n&&af.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(ad&&ad.dataFilter){af=ad.dataFilter(af,ae)}if(typeof af==="string"){if(ae==="json"||!ae&&ac.indexOf("json")>=0){af=N(af)}else{if(ae==="script"||!ae&&ac.indexOf("javascript")>=0){b.globalEval(af)}}}return af}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(i){var k=i.target;var g=b(k);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}k=f[0]}var h=this;h.clk=k;if(k.type=="image"){if(i.offsetX!=undefined){h.clk_x=i.offsetX;h.clk_y=i.offsetY}else{if(typeof b.fn.offset=="function"){var j=g.offset();h.clk_x=i.pageX-j.left;h.clk_y=i.pageY-j.top}else{h.clk_x=i.pageX-k.offsetLeft;h.clk_y=i.pageY-k.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p}var d=this[0];var h=q?d.getElementsByTagName("*"):d.elements;if(!h){return p}var k,g,f,r,e,m,c;for(k=0,m=h.length;k<m;k++){e=h[k];f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val(),type:e.type});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(g=0,c=r.length;g<c;g++){p.push({name:f,value:r[g]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r,type:e.type})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(g){for(var h=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,g);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(h,d):h.push(d)}return h};b.fieldValue=function(d,e){var f=d.name,p=d.type,q=d.tagName.toLowerCase();if(e===undefined){e=true}if(e&&(!f||d.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!d.checked||(p=="submit"||p=="image")&&d.form&&d.form.clk!=d||q=="select"&&d.selectedIndex==-1)){return null}if(q=="select"){var k=d.selectedIndex;if(k<0){return null}var m=[],c=d.options;var h=(p=="select-one");var l=(h?k+1:c.length);for(var g=(h?k:0);g<l;g++){var j=c[g];if(j.selected){var o=j.value;if(!o){o=(j.attributes&&j.attributes.value&&!(j.attributes.value.specified))?j.text:j.value}if(h){return o}m.push(o)}}return m}return b(d).val()};b.fn.clearForm=function(c){return this.each(function(){b("input,select,textarea",this).clearFields(c)})};b.fn.clearFields=b.fn.clearInputs=function(c){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var f=this.type,e=this.tagName.toLowerCase();if(d.test(f)||e=="textarea"||(c&&/hidden/.test(f))){this.value=""}else{if(f=="checkbox"||f=="radio"){this.checked=false}else{if(e=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};b.fn.ajaxSubmit.debug=false;function a(){if(!b.fn.ajaxSubmit.debug){return}var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);