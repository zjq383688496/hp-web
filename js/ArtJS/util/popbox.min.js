!function(a){a&&window.ArtJS&&(ArtJS.define("ArtJS.util.popbox",{id:"util-popbox",status:!1,boxes:{},boxElm:null,init:function(){if(!this.container){a("#"+this.id).remove();var b="z-index:9010;position:absolute;top:-10000px;left:-10000px;";this.container=a('<div id="'+this.id+'" style="'+b+'"></div>'),a("body").append(this.container)}},createBoxId:function(){return"popbox-"+(new Date).getTime()},show:function(b){this.container||this.init();var c,d,e;b.url?(c=b.url,this.boxes[c]?this.showBox(this.boxes[c],b.op,b.overbg):(d=this.createBoxId(),e=a('<div id="'+d+'"></div>'),ArtJS.util.recyclebin.add(e),ArtJS.util.popbox.boxes[c]=d,b.css&&a("head").append('<link rel="stylesheet" type="text/css"  href="'+b.css+'" />'),e.load(c,function(){ArtJS.util.popbox.showBox(d,b.op,b.overbg),b.callback&&b.callback(e)}))):b.content?(c=a("<div>"+b.content+"</div>").text(),this.boxes[c]?this.showBox(this.boxes[c],b.op,b.overbg):(d=this.createBoxId(),e=a('<div id="'+d+'">'+b.content+"</div>"),ArtJS.util.recyclebin.add(e),ArtJS.util.popbox.boxes[c]=d,ArtJS.util.popbox.showBox(d,b.op,b.overbg),b.callback&&b.callback(e))):b.id&&(d=b.id,ArtJS.util.popbox.showBox(d,b.op,b.overbg))},showBox:function(b,c,d){this.boxElm=a("#"+b),0!==this.boxElm.length&&(ArtJS.util.overlayer.showLayer(c,d),this.boxElm.show(),this.container.html("").append(this.boxElm).show(),this.status=!0,this.resize(),ArtJS.page.keyHandler.add(document,"ESC","esc-popbox",function(){ArtJS.util.popbox.close()}))},showContent:function(a){this.boxElm=null,ArtJS.util.overlayer.showLayer(a.op,a.overbg),this.container.html(a.content).show(),a.callback&&a.callback(),this.status=!0,this.resize(),ArtJS.page.keyHandler.add(document,"ESC","esc-popbox",function(){ArtJS.util.popbox.close()})},resize:function(){if(this.status){var b=(a(window).width()-this.container.width())/2,c=(a(window).height()-this.container.height())/2;this.container.css({left:a(document).scrollLeft()+Math.max(b,20)+"px",top:a(document).scrollTop()+Math.max(c,20)+"px"}),a.browser.isIE6&&this.container.bindJendUI("HideOverElements","select,object")}},close:function(b){this.status&&(ArtJS.util.recyclebin.add(this.boxElm),this.container.hide(),ArtJS.util.overlayer.hideLayer(),a.browser.isIE6&&this.container.bindJendUI("ShowOverElements","select,object"),this.status=!1,b&&b(),ArtJS.page.keyHandler.remove(document,"esc-popbox"))}},function(){a(window).resize(function(){ArtJS.util.popbox.resize()})}),ArtJS.debug("popbox.js","初始化成功"))}(jQuery);